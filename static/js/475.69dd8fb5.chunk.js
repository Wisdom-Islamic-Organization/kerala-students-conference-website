"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[475],{1475:(t,e,a)=>{a.r(e),a.d(e,{default:()=>b});var i=a(5043),n=a(8572),d=a(5627),o=a(1774),s=a(5064),c=a(5472),r=a(2387),l=a(1766),m=a(9);const u=(t,e,a)=>{const i=((t,e)=>[e.map((t=>t.title)).join(","),...t.map((t=>e.map((e=>{const a=t[e.dataIndex];return a?`"${a}"`:""})).join(",")))].join("\n"))(t,e),n=new Blob([i],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");navigator.msSaveBlob?navigator.msSaveBlob(n,a):(d.href=URL.createObjectURL(n),d.setAttribute("download",a),document.body.appendChild(d),d.click(),document.body.removeChild(d))};var p=a(579);const{TabPane:x}=n.A,h=(0,m.Ay)(l.default)`
  padding-top: 100px;
  min-height: calc(100vh - 100px);
`,y=m.Ay.div`
  background: white;
  padding: 24px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
`,b=()=>{const[t,e]=(0,i.useState)([]),[a,l]=(0,i.useState)([]),[m,b]=(0,i.useState)(!0),[v,g]=(0,i.useState)("1");(0,i.useEffect)((()=>{(async()=>{try{const t=(0,c.P)((0,c.rJ)(r.db,"registrations"),(0,c.My)("timestamp","desc")),a=(await(0,c.GG)(t)).docs.map((t=>{var e;return{id:t.id,...t.data(),timestamp:(null===(e=t.data().timestamp)||void 0===e?void 0:e.toDate().toLocaleString())||"N/A"}})),i=(0,c.P)((0,c.rJ)(r.db,"contacts"),(0,c.My)("timestamp","desc")),n=(await(0,c.GG)(i)).docs.map((t=>{var e;return{id:t.id,...t.data(),timestamp:(null===(e=t.data().timestamp)||void 0===e?void 0:e.toDate().toLocaleString())||"N/A"}}));e(a),l(n)}catch(t){d.Ay.error("Failed to fetch data"),console.error("Error fetching data:",t)}finally{b(!1)}})()}),[]);const k=[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Contact",dataIndex:"contactNumber",key:"contactNumber"},{title:"District",dataIndex:"district",key:"district"},{title:"Institution",dataIndex:"institution",key:"institution"},{title:"Timestamp",dataIndex:"timestamp",key:"timestamp"}],j=[{title:"Name",dataIndex:"name",key:"name"},{title:"Contact Number",dataIndex:"contactNumber",key:"contactNumber"},{title:"Timestamp",dataIndex:"timestamp",key:"timestamp"}];return(0,p.jsxs)(h,{children:[(0,p.jsx)("h1",{children:"Admin Dashboard"}),(0,p.jsx)(y,{children:(0,p.jsxs)(n.A,{defaultActiveKey:"1",activeKey:v,onChange:g,tabBarExtraContent:{right:(0,p.jsxs)(p.Fragment,{children:["1"===v&&(0,p.jsx)(o.A,{onClick:()=>u(t,k,"registrations.csv"),children:"Download CSV"}),"2"===v&&(0,p.jsx)(o.A,{onClick:()=>u(a,j,"contacts.csv"),children:"Download CSV"})]})},children:[(0,p.jsx)(x,{tab:"Registrations",children:(0,p.jsx)(s.A,{dataSource:t,columns:k,loading:m,rowKey:"id",scroll:{x:!0}})},"1"),(0,p.jsx)(x,{tab:"Contacts",children:(0,p.jsx)(s.A,{dataSource:a,columns:j,loading:m,rowKey:"id",scroll:{x:!0}})},"2")]})})]})}}}]);
//# sourceMappingURL=475.69dd8fb5.chunk.js.map