{"version":3,"file":"static/js/502.69fcc57f.chunk.js","mappings":"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","sources":["utils/csvExport.ts","pages/Admin/index.tsx"],"sourcesContent":["const convertToCSV = (data: any[], columns: any[]) => {\n  const header = columns.map(col => col.title).join(',');\n  const rows = data.map(item => \n    columns.map(col => {\n      const value = item[col.dataIndex];\n      // Handle values that might contain commas\n      return value ? `\"${value}\"` : '';\n    }).join(',')\n  );\n  \n  return [header, ...rows].join('\\n');\n};\n\nexport const downloadCSV = (data: any[], columns: any[], filename: string) => {\n  const csv = convertToCSV(data, columns);\n  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n  const link = document.createElement('a');\n  \n  if ((navigator as any).msSaveBlob) {\n    // IE 10+\n    (navigator as any).msSaveBlob(blob, filename);\n  } else {\n    link.href = URL.createObjectURL(blob);\n    link.setAttribute('download', filename);\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n}; ","import { useState, useEffect } from 'react';\nimport { Table, Tabs, message, Button } from 'antd';\nimport { collection, query, getDocs, orderBy } from 'firebase/firestore';\nimport { db } from '../../config/firebase';\nimport Container from '../../common/Container';\nimport styled from 'styled-components';\nimport { downloadCSV } from '../../utils/csvExport';\n\nconst { TabPane } = Tabs;\n\nconst AdminContainer = styled(Container)`\n  padding-top: 100px;\n  min-height: calc(100vh - 100px);\n`;\n\nconst TableContainer = styled.div`\n  background: white;\n  padding: 24px;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n`;\n\ninterface Registration {\n  id: string;\n  name: string;\n  email: string;\n  contactNumber: string;\n  district: string;\n  institution: string;\n  timestamp: string;\n  [key: string]: any;\n}\n\ninterface Contact {\n  id: string;\n  name: string;\n  contactNumber: string;\n  timestamp: string;\n  [key: string]: any;\n}\n\nconst Admin = () => {\n  const [registrations, setRegistrations] = useState<Registration[]>([]);\n  const [contacts, setContacts] = useState<Contact[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeKey, setActiveKey] = useState(\"1\");\n\n  const fetchData = async () => {\n    try {\n      // Fetch registrations\n      const registrationsQuery = query(\n        collection(db, 'registrations'),\n        orderBy('timestamp', 'desc')\n      );\n      const registrationsSnapshot = await getDocs(registrationsQuery);\n      const registrationsData = registrationsSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n        timestamp: doc.data().timestamp?.toDate().toLocaleString() || 'N/A'\n      })) as Registration[];\n\n      // Fetch contacts\n      const contactsQuery = query(\n        collection(db, 'contacts'),\n        orderBy('timestamp', 'desc')\n      );\n      const contactsSnapshot = await getDocs(contactsQuery);\n      const contactsData = contactsSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n        timestamp: doc.data().timestamp?.toDate().toLocaleString() || 'N/A'\n      })) as Contact[];\n\n      setRegistrations(registrationsData);\n      setContacts(contactsData);\n    } catch (error) {\n      message.error('Failed to fetch data');\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const registrationColumns = [\n    { title: 'Name', dataIndex: 'name', key: 'name' },\n    { title: 'Email', dataIndex: 'email', key: 'email' },\n    { title: 'Contact', dataIndex: 'contactNumber', key: 'contactNumber' },\n    { title: 'District', dataIndex: 'district', key: 'district' },\n    { title: 'Institution', dataIndex: 'institution', key: 'institution' },\n    { title: 'Timestamp', dataIndex: 'timestamp', key: 'timestamp' },\n  ];\n\n  const contactColumns = [\n    { title: 'Name', dataIndex: 'name', key: 'name' },\n    { title: 'Contact Number', dataIndex: 'contactNumber', key: 'contactNumber' },\n    { title: 'Timestamp', dataIndex: 'timestamp', key: 'timestamp' },\n  ];\n\n  return (\n    <AdminContainer>\n      <h1>Admin Dashboard</h1>\n      <TableContainer>\n        <Tabs \n          defaultActiveKey=\"1\"\n          tabBarExtraContent={{\n            right: (\n              <>\n                {activeKey === \"1\" && (\n                  <Button onClick={() => downloadCSV(registrations, registrationColumns, 'registrations.csv')}>\n                    Download CSV\n                  </Button>\n                )}\n                {activeKey === \"2\" && (\n                  <Button onClick={() => downloadCSV(contacts, contactColumns, 'contacts.csv')}>\n                    Download CSV\n                  </Button>\n                )}\n              </>\n            )\n          }}\n        >\n          <TabPane tab=\"Registrations\" key=\"1\">\n            <Table dataSource={registrations} columns={registrationColumns} loading={loading} rowKey=\"id\" scroll={{ x: true }} />\n          </TabPane>\n          <TabPane tab=\"Contacts\" key=\"2\">\n            <Table dataSource={contacts} columns={contactColumns} loading={loading} rowKey=\"id\" scroll={{ x: true }} />\n          </TabPane>\n        </Tabs>\n      </TableContainer>\n    </AdminContainer>\n  );\n};\n\nexport default Admin; "],"names":["downloadCSV","data","columns","filename","csv","convertToCSV","map","col","title","join","item","value","dataIndex","concat","blob","Blob","type","link","document","createElement","navigator","msSaveBlob","href","URL","createObjectURL","setAttribute","body","appendChild","click","removeChild","TabPane","Tabs","AdminContainer","styled","Container","_templateObject","_taggedTemplateLiteral","TableContainer","div","_templateObject2","Admin","registrations","setRegistrations","useState","contacts","setContacts","loading","setLoading","activeKey","setActiveKey","useEffect","async","registrationsQuery","query","collection","db","orderBy","registrationsData","getDocs","docs","doc","_doc$data$timestamp","_objectSpread","id","timestamp","toDate","toLocaleString","contactsQuery","contactsData","_doc$data$timestamp2","error","message","console","fetchData","registrationColumns","key","contactColumns","_jsxs","children","_jsx","defaultActiveKey","tabBarExtraContent","right","_Fragment","Button","onClick","tab","Table","dataSource","rowKey","scroll","x"],"sourceRoot":""}