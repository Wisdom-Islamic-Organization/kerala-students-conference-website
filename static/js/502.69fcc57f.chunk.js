"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[502],{4502:(t,a,e)=>{e.r(a),e.d(a,{default:()=>j});var n=e(1413),i=e(168),d=e(2791),o=e(781),s=e(3695),c=e(435),r=e(7796),l=e(9631),m=e(4e3),u=e(2478),p=e(1191);const x=(t,a,e)=>{const n=((t,a)=>[a.map((t=>t.title)).join(","),...t.map((t=>a.map((a=>{const e=t[a.dataIndex];return e?'"'.concat(e,'"'):""})).join(",")))].join("\n"))(t,a),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");navigator.msSaveBlob?navigator.msSaveBlob(i,e):(d.href=URL.createObjectURL(i),d.setAttribute("download",e),document.body.appendChild(d),d.click(),document.body.removeChild(d))};var h,b,y=e(184);const{TabPane:v}=o.default,g=(0,p.ZP)(u.default)(h||(h=(0,i.Z)(["\n  padding-top: 100px;\n  min-height: calc(100vh - 100px);\n"]))),k=p.ZP.div(b||(b=(0,i.Z)(["\n  background: white;\n  padding: 24px;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n"]))),j=()=>{const[t,a]=(0,d.useState)([]),[e,i]=(0,d.useState)([]),[u,p]=(0,d.useState)(!0),[h,b]=(0,d.useState)("1");(0,d.useEffect)((()=>{(async()=>{try{const t=(0,l.IO)((0,l.hJ)(m.db,"registrations"),(0,l.Xo)("timestamp","desc")),e=(await(0,l.PL)(t)).docs.map((t=>{var a;return(0,n.Z)((0,n.Z)({id:t.id},t.data()),{},{timestamp:(null===(a=t.data().timestamp)||void 0===a?void 0:a.toDate().toLocaleString())||"N/A"})})),d=(0,l.IO)((0,l.hJ)(m.db,"contacts"),(0,l.Xo)("timestamp","desc")),o=(await(0,l.PL)(d)).docs.map((t=>{var a;return(0,n.Z)((0,n.Z)({id:t.id},t.data()),{},{timestamp:(null===(a=t.data().timestamp)||void 0===a?void 0:a.toDate().toLocaleString())||"N/A"})}));a(e),i(o)}catch(t){s.ZP.error("Failed to fetch data"),console.error("Error fetching data:",t)}finally{p(!1)}})()}),[]);const j=[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Contact",dataIndex:"contactNumber",key:"contactNumber"},{title:"District",dataIndex:"district",key:"district"},{title:"Institution",dataIndex:"institution",key:"institution"},{title:"Timestamp",dataIndex:"timestamp",key:"timestamp"}],f=[{title:"Name",dataIndex:"name",key:"name"},{title:"Contact Number",dataIndex:"contactNumber",key:"contactNumber"},{title:"Timestamp",dataIndex:"timestamp",key:"timestamp"}];return(0,y.jsxs)(g,{children:[(0,y.jsx)("h1",{children:"Admin Dashboard"}),(0,y.jsx)(k,{children:(0,y.jsxs)(o.default,{defaultActiveKey:"1",tabBarExtraContent:{right:(0,y.jsxs)(y.Fragment,{children:["1"===h&&(0,y.jsx)(c.Z,{onClick:()=>x(t,j,"registrations.csv"),children:"Download CSV"}),"2"===h&&(0,y.jsx)(c.Z,{onClick:()=>x(e,f,"contacts.csv"),children:"Download CSV"})]})},children:[(0,y.jsx)(v,{tab:"Registrations",children:(0,y.jsx)(r.Z,{dataSource:t,columns:j,loading:u,rowKey:"id",scroll:{x:!0}})},"1"),(0,y.jsx)(v,{tab:"Contacts",children:(0,y.jsx)(r.Z,{dataSource:e,columns:f,loading:u,rowKey:"id",scroll:{x:!0}})},"2")]})})]})}}}]);
//# sourceMappingURL=502.69fcc57f.chunk.js.map