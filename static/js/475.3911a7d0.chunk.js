"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[475],{1475:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var i=a(8572),r=a(4674),s=a(289),n=a(5627),d=a(1802),o=a(5064),c=a(5594),l=a(8174),m=a(5472),u=a(5043),p=a(9),x=a(1766),y=a(2387);const h=(e,t,a)=>{const i=((e,t)=>[t.map((e=>e.title)).join(","),...e.map((e=>t.map((t=>{const a=e[t.dataIndex];return a?`"${a}"`:""})).join(",")))].join("\n"))(e,t),r=new Blob([i],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");navigator.msSaveBlob?navigator.msSaveBlob(r,a):(s.href=URL.createObjectURL(r),s.setAttribute("download",a),document.body.appendChild(s),s.click(),document.body.removeChild(s))};var A=a(579);const{TabPane:b}=i.A,{Option:j}=r.A,g=(0,p.Ay)(x.default)`
  padding-top: 100px;
  min-height: calc(100vh - 100px);
`,w=p.Ay.div`
  background: white;
  padding: 24px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
`,k=()=>{const[e,t]=(0,u.useState)([]),[a,p]=(0,u.useState)([]),[x,k]=(0,u.useState)(!0),[v,I]=(0,u.useState)("1"),[f,S]=(0,u.useState)(!1),[C]=s.A.useForm(),[N,T]=(0,u.useState)([]),F=async()=>{try{const e=(0,m.P)((0,m.rJ)(y.db,"news"),(0,m.My)("timestamp","desc")),t=(await(0,m.GG)(e)).docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate().toLocaleString())||"N/A"}}));T(t)}catch(e){console.error("Error fetching news:",e),n.Ay.error("Failed to fetch news")}};(0,u.useEffect)((()=>{(async()=>{try{const e=(0,m.P)((0,m.rJ)(y.db,"registrations"),(0,m.My)("timestamp","desc")),a=(await(0,m.GG)(e)).docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate().toLocaleString())||"N/A"}})),i=(0,m.P)((0,m.rJ)(y.db,"contacts"),(0,m.My)("timestamp","desc")),r=(await(0,m.GG)(i)).docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate().toLocaleString())||"N/A"}}));t(a),p(r)}catch(e){n.Ay.error("Failed to fetch data"),console.error("Error fetching data:",e)}finally{k(!1)}})(),F()}),[]);const D=[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Contact",dataIndex:"contactNumber",key:"contactNumber"},{title:"District",dataIndex:"district",key:"district"},{title:"Institution",dataIndex:"institution",key:"institution"},{title:"Timestamp",dataIndex:"timestamp",key:"timestamp"}],E=[{title:"Name",dataIndex:"name",key:"name"},{title:"Contact Number",dataIndex:"contactNumber",key:"contactNumber"},{title:"Timestamp",dataIndex:"timestamp",key:"timestamp"}],G=[{title:"Title",dataIndex:"title",key:"title"},{title:"Type",dataIndex:"type",key:"type"},{title:"Timestamp",dataIndex:"timestamp",key:"timestamp"},{title:"Action",key:"action",render:(e,t)=>(0,A.jsx)(d.A,{danger:!0,onClick:()=>(async e=>{try{await(0,m.kd)((0,m.H9)(y.db,"news",e)),n.Ay.success("News deleted successfully"),F()}catch(t){console.error("Error deleting news:",t),n.Ay.error("Failed to delete news")}})(t.id),children:"Delete"})}];return(0,A.jsxs)(g,{children:[(0,A.jsx)("h1",{children:"Admin Dashboard"}),(0,A.jsx)(w,{children:(0,A.jsxs)(i.A,{defaultActiveKey:"1",activeKey:v,onChange:I,tabBarExtraContent:{right:(0,A.jsxs)(A.Fragment,{children:["1"===v&&(0,A.jsx)(d.A,{onClick:()=>h(e,D,"registrations.csv"),children:"Download CSV"}),"2"===v&&(0,A.jsx)(d.A,{onClick:()=>h(a,E,"contacts.csv"),children:"Download CSV"}),"3"===v&&(0,A.jsx)(d.A,{type:"primary",onClick:()=>S(!0),children:"Add News"})]})},children:[(0,A.jsx)(b,{tab:"Registrations",children:(0,A.jsx)(o.A,{dataSource:e,columns:D,loading:x,rowKey:"id",scroll:{x:!0}})},"1"),(0,A.jsx)(b,{tab:"Contacts",children:(0,A.jsx)(o.A,{dataSource:a,columns:E,loading:x,rowKey:"id",scroll:{x:!0}})},"2"),(0,A.jsx)(b,{tab:"News",children:(0,A.jsx)(o.A,{dataSource:N,columns:G,loading:x,rowKey:"id"})},"3")]})}),(0,A.jsx)(c.A,{title:"Add News",visible:f,onCancel:()=>S(!1),footer:null,children:(0,A.jsxs)(s.A,{form:C,onFinish:async e=>{try{await(0,m.gS)((0,m.rJ)(y.db,"news"),{...e,timestamp:(0,m.O5)()}),n.Ay.success("News added successfully"),S(!1),C.resetFields(),F()}catch(t){console.error("Error adding news:",t),n.Ay.error("Failed to add news")}},children:[(0,A.jsx)(s.A.Item,{name:"type",rules:[{required:!0}],children:(0,A.jsxs)(r.A,{placeholder:"Select type",children:[(0,A.jsx)(j,{value:"youtube",children:"YouTube"}),(0,A.jsx)(j,{value:"image",children:"Image"}),(0,A.jsx)(j,{value:"facebook",children:"Facebook"}),(0,A.jsx)(j,{value:"instagram",children:"Instagram"})]})}),(0,A.jsx)(s.A.Item,{name:"title",rules:[{required:!0}],children:(0,A.jsx)(l.A,{placeholder:"Title"})}),(0,A.jsx)(s.A.Item,{name:"description",rules:[{required:!0}],children:(0,A.jsx)(l.A.TextArea,{placeholder:"Description"})}),(0,A.jsx)(s.A.Item,{name:"url",rules:[{required:!0}],children:(0,A.jsx)(l.A,{placeholder:"URL (e.g., YouTube embed link, image link, Facebook post, Instagram post)"})}),(0,A.jsx)(s.A.Item,{children:(0,A.jsx)(d.A,{type:"primary",htmlType:"submit",children:"Submit"})})]})})]})}}}]);
//# sourceMappingURL=475.3911a7d0.chunk.js.map